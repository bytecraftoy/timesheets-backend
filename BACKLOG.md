<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->
**Table of Contents**

- [BACKLOG](#backlog)
    - [User stories](#user-stories)
    - [Individual tasks](#individual-tasks)
    - [Known defects](#known-defects)

<!-- markdown-toc end -->

# BACKLOG
## User stories
| ID | As a/an...        | I can....                                                                                          | So that....                                                                                                         | Priority | Acceptance criteria                                                                                                                                                                                                                                                                                                                                                                                                                              | Effort estimation (in relation to each other item) | Status (done/work in progress/to be started) | Notes                                                             | (Done by) |
|----|-------------------|----------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|----------------------------------------------|-------------------------------------------------------------------|-----------|
| 29 | manager           | add projects                                                                                       | we can work with several clients and projects;                                                                       | MUST     | project has a name; project has a client from a predefined list; project has a manager/owner (someone responsible), can only be chosen someone with the manager/owner role; billable&non-billable hours visible; creation timestamp (+ who)                                                                                                                                                                                                              | 5                                                  | Done                    |                                                                   |           |
| 44 | employee          | input hours into the system                                                                        | I can keep track of all my working hours                                                                            | MUST     | matrix based visual; columns are dates; rows are projects; employee/manager can see all of their projects by default; can be entirely navigated by keyboard (tab + up/down); can add descriptions to hours; supports all intuitive time formats for input; displays hours in 7h 30min; input is validated for format and between 0 and 24h                                                                                                                       | 8                                                  | Done                    |                                                                   |           |
| 1  | employee          | easily input several days' hours at a time                                                         | the times do not have to be inputted daily                                                                          | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 2  | employee          | input hours using solely the keyboard                                                              | the input process is quick and I don't have to use the mouse                                                        | MUST     | All different combinations of hour input have been tested with keyboard only                                                                                                                                                                                                                                                                                                                                                                     |                                                    | Done                                         |                                                                   |           |
| 3  | employee          | input hours in advance                                                                             | I don't have to remember to do it afterwards                                                                        | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 9  | employee          | edit previously inputted hours                                                                     | I can ensure that hours are inputted correctly                                                                      | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 25 | employee          | add description to the inputted hours                                                              | reports are more clear and easier to read                                                                           | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 7  | employee          | add paid and non-paid leave (e.g. holidays, sick days and parental leave)                          | I get paid when I have had a legitimate reason for being absent from work                                           | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 11 | employee          | input hours in different levels of detail (project, weekly, daily, by task)                        | I can report to and work for several types of customers with different requirements                                 | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 31 | manager           | create a monthly report per project (for billing purposes)                                         | monthly reporting and billing is correct                                                                            | MUST     | selectable time frame (min 1 day); quidlo time choosing / input; offer default time frame options (last week, last month, last x months etc); keyboard friendly; able to choose a client (and then their projects), then choose an employee from the project; show each employee's hours per project; billable / non billable filter; also include descriptions etc; first choose options and then generate the report; include a summary of a sort for the report |                                                    | Done                                         | create reports, papers for billings, papers for paying the salary |           |
| 32 | manager           | view / create a monthly report per employee including all projects and hours (for salary purposes) | I can handle salary payment effortlessly and save time                                                              | MUST     | selectable time frame (min 1 day); offer default time frame options (last week, last month, last x months etc); quidlo time choosing / inputable to choose an employee (or multiple employees) from a list, then choose the employee's clients; keyboard friendly; billable / non billable filter; also include descriptions etc; first choose options and then generate the report; include a summary of a sort for the report                                |                                                    | Done                                         |                                                                   |           |
| 34 | manager           | add employees to projects                                                                          | employees can record their work hours for their tasks and projects                                                  | MUST     | employees chosen from a list (can't add the same person to the same project twice); any employee or manager can be added; employees can be added when creating the project or after, from the project's dropdown menu                                                                                                                                                                                                                                | 5                                                  | Done                                         |                                                                   |           |
| 53 | manager           | see the collective hours for a specific project                                                    | I can handle the billing                                                                                            | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         | One should be able to see what the hours where spent on           |           |
| 52 | manager           | remove employees from a project                                                                    | I can keep the projects up to date if the personnel changes                                                         | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | Done                                         |                                                                   |           |
| 55 | user              | impersonate a manager/employee                                                                     | to simulate logging in and verify that each user sees what they're supposed to see                                  |          | any existing manager/employee can be chosen from a listdifferentiate between manager / employeeonly display the projects where the chosen user belongs to (dashboard page)hide project actions and 'add project' for the employeefilter for manager to view own/all projectshide billing report for employeesalary report only shows own data                                                                                                    |                                                    | Done                                  |                                                                   |           |
| 35 | manager           | add a cost for a person per project (per task)                                                     | we can bill work correctly                                                                                          | MUST     | report has costs; cost to join table;  tuntihinta projektille; näkyy/vaikuttaa vain raporteissa; näkyy billing ja salary raporteissa; kokonaislaskutus per projekti; kokonaislaskutus per työntekijä; kokonaislaskutus grand total                                                                                                                                                                                                                            |                                                    | Done                                  |                                                                   |           |
| 36 | manager           | define hourly cost/price for an employee and for a project                                         | I can easily see the overall salary for an employee                                                                 | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 23 | user              | log into the app quickly                                                                           | I do not waste time and get frustrated                                                                              | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                | Add user authentication to backend methods                        |           |
| 33 | manager           | create a monthly report (for other purposes)                                                       | the data can be read and distributed to other stakeholders when necessary                                           | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 41 | manager           | monitor employees' work hours                                                                      | I can fulfil my legal obligation of work occupational safety and health                                             |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 30 | manager           | edit projects                                                                                      | existing projects can be kept up to date                                                                            | MUST     | Can edit the following: 1) name, 2) client (from a predefined list), 3) manager/owner, 4) billable&non-billable hourscreate a log of who and when edited                                                                                                                                                                                                                                                                                         | 5                                                  | To be started﻿                                |                                                                   |           |
| 50 | manager           | delete projects                                                                                    | I can keep things better organised and remove redundant projects                                                    | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 2                                                  | To be started                                |                                                                   |           |
| 4  | employee          | input hours using a mobile device                                                                  | I don't have to open the computer and I can do it while watching TV                                                 | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                | test with different window sizes                                  |           |
| 15 | user              | use the application through a web browser                                                          | the application is usable easily from several types of devices and without installation and need for client updates | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 6  | employee          | rely on appropriate defaults                                                                       | data entry is convenient and effortless                                                                             | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 40 | manager           | rely on appropriate defaults                                                                       | reporting is logical and complete                                                                                   | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 8  | employee          | differentiate between billable and non-billable hours                                              | I know how much I've done or the other                                                                              | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 22 | employee          | rely on the system being safe                                                                      | other employees cannot accidentally see my personal information                                                     | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 39 | manager           | can send a reminder to an employee about inputting hours before a certain date                     |                                                                                                                     | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 44 | developer         | rely on good architecture                                                                          | the software is easier to implement and mantain                                                                     | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 45 | developer         | rely on a complete data model                                                                      | all areas of the software are in sync                                                                               | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 46 | developer         | rely on code being clean and easily maintainable                                                   | further changes to the software are easier to implement                                                             | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 47 | application owner | rely on good architecture                                                                          | the software is not costly to operate and has a long life cycle                                                     | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 48 | application owner | rely on good quality                                                                               | the software works correctly, is available, performant, secure, and easy to maintain                                | MUST     |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 37 | manager           | export reports in PDF format                                                                       | I can send them to client for invoicing purposes                                                                    | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 5  | employee          | get notifications/reminders about inputting hours                                                  | I remember to do it on time                                                                                         | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 12 | employee          | use timer mode to input hours                                                                      | I can input hours realtime                                                                                          | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 50 | manager           | archive projects                                                                                   | I can delete projects without actually deleting them                                                                | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started                                |                                                                   |           |
| 49 | manager           | create and add tags to the projects                                                                | I can classify them and make them more readable                                                                     | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started                                |                                                                   |           |
| 38 | manager           | mark hours inputted by an employee as billed (employee can no longer edit them)                    | the reports can be edited or proceed to payment in proper order                                                     | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                | once a report is approved they can't be edited anymore            |           |
| 51 | manager           | check projects as active/inactive                                                                  | I can filter them and organise them better                                                                          | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started                                |                                                                   |           |
| 16 | user              | be provided with contextual help                                                                   | unclear features are easy to use                                                                                    | COULD    |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 10 | employee          | input hours using slack                                                                            | it is easy to add hours when in a conversation context (e.g. a quick consultation)                                  | COULD    |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 54 | employee          | see my expected salary based on the inputted hours                                                 | I get an estimation of the month's salary                                                                           | SHOULD   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started                                |                                                                   |           |
| 13 | employee          | see my next month's estimated salary based on my inputted hours                                    | I can plan ahead                                                                                                    |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 14 | employee          | define what proportion of my daily hours goes to which project                                     | I can only input hours and the system divides them between my projects                                              |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 20 | employee          | view my daily/weekly/monthly/yearly hours                                                          | I know how much work I have done and need to do                                                                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 21 | employee          | see quickly whether I have done more or less hours than allocated to the project                   | I have a rough idea where I am compared to plans                                                                    |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |
| 28 | employee          | confirm that my inputted hours are correct and that I do not intend to edit the anymore            | my hours can be billed from the client                                                                              |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                    | To be started﻿                                |                                                                   |           |


## Individual tasks

| Task                                                                                                                | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Tags                                                 |
|---------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
| Add easier to understand manager symbol (Appista ei tunnu selviävän, mikä käyttäjä on työntekijä ja mikä manageri.) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | FRONT-END                                            |
| Check that daily total cannot go over 24 h                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Add automation tests for project owner to reports                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END                                             |
| Move implementation of ProjectByUser to DAO                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END, DATABASE, MEDIUM                           |
| Change test data names to "real" ones                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | DATABASE, TESTING                                    |
| Add test for removing employees from a project                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END, TESTING, MINI                              |
| Check consistency of names                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | FRONT-END, BACK-END, DATABASE, API, REFACTOR, MEDIUM |
| Make the role of managers consistent throughout the stack                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | FRONT-END, BACK-END, DATABASE, API, REFACTOR, BIG    |
| Refactor Project objects as Option[Project]                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END, REFACTOR, BIG                              |
| Remove JsValue helper functions (mainly in TimeInputController) and use models or DTOs instead                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END, REFACTOR, MEDIUM                           |
| Check for primitive obsession: currency, emails, phone numbers...                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | BACK-END, REFACTOR, BIG                              |
| Write better naming to to project tests                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Add more error handling (don't display error 500)                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Add logger to all error messages                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Send JSON message with error from back-end                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Add specific HTTP codes to request (Conflict, Created etc)                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Add error handling to Time-Input-Controller: byInterval                                                             | https://gitlab.com/bytecraftoy/timesheets/back-end/-/merge_requests/44#note_493878206                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                      |
| Add error excpetion / trace messages to logger                                                                      | https://gitlab.com/bytecraftoy/timesheets/back-end/-/merge_requests/44#note_494759971   Nämä error logautukset/ ulospäin heitot tosiaan hyvä jäsennellä jotenkin näin backendin lokilla hyvä näkyä exception stacktrace kokonaisuudessaan --> logger.error(msg, e)ulospäin ei kannata paljastaa koko stacktracea, vaan tarjota hallittu virheviesti. Kannattaa tarkastaa miten tuo error serialisoituu ulospäin näkyvään viestiin tässä s"""Error retrieving timeinput byProject: $error""". Saattaapi olla, että kannattaa nämä joissa $error serialisoitu, niin muotoilla pikkusen uusiksi, jos stacktrace näkyy ulospäin virheessä (stacktracesta voi paljastua tietoa, jota pystyy käyttämään hyökkäysrajapintana) |                                                      |
| Remove exception messages from messages sent to front end                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| (Test coverage and) Sonarqube to CI                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |
| Configure CSRF filter to work with Swagger or vice versa                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |


## Known defects
| Defect ID | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Link to task | Status          | Date / App version |
|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------|-----------------|--------------------|
| 1         | BillingReportForm ja SalaryReportForm   Select fieldien mahdolliset valinnat riippuvat edellisten fieldien valinnoista: Client -> Projects -> Employees ja Employee -> Clients. Esimerkiksi jos on ensin valittu Client, sitten projekteja ja työntekijöitä ja sitten vaihdetaankin Client valintaa niin projekti ja employee kentille jää vanhoja valintoja talteen, vaikka ne Client kentän päivityksen myötä poistuvat fieldin valinta vaihtoehdoista.   Näin ollen frontti voi lähettää bäkille vääriä parametreja api kutsun mukana. Bäkistä kuitenkin palautetaan vain toisiinsa liittyviä clientteja, projekteja ja työntekijöitä, joten tämän ei pitäisi vaikuttaa raporttidatan oikeellisuuteen. |              | New             |                    |
| 2         | Time Input Vaihtaessa viikkon tallennuksen ollessa kesken muutetut arvot eivät tallennu.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |              | Fixed 17.4.2021 | Sprint 3 lähtien   |
| 3         | Frontissa Material UI:n ainakin Collapse-komponentti ja Select-komponentti aiheuttaa seuraavan virheen konsoliin:   Warning: findDOMNode is deprecated in StrictMode. findDOMNode was passed an instance of Transition which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node                                                                                                                                                                                                                                                                                              |              |                 |                    |
| 4         | SalaryReportForm ja BillingReportForm, raportin generoimisen  jälkeen konsoliin tulee virhe:   Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.                                                                                                                                                                                                                                                                                                                                                                       |              |                 |                    |
| 5         | BillingReportPreview ja SalaryReportPreview. Kun taulukon yläreunassa olevasta nuolesta klikkaa taulukon piiloon, niin otsikko siirtyy sivusuunnassa hieman. Jostain syystä nuoli ylös ikoni vie 3px enemmän tilaa sivusuunnassa kuin nuoli alas ikoni.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |              |                 |                    |
| 6         | Time Input Syötä tunti.Vaihda viikko, ennen kuin tallennus alkaa.--> Sovellus kaatuu                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |              | Fixed 17.4.2021 | Sprint 6 lähtien﻿   |
| 7         | Raportilla desimaalien määrä ei valuutan tarkkuudessa.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |              | New             |                    |
| 8         | Salary-raportilla näkyy asiakkaan kaikki projektit, vaikka valittu käyttäjä (ei manageri) ei kuulu projektiin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |              |                 |                    |








